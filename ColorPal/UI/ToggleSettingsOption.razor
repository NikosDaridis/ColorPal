<div class="flex items-center justify-between">
    <label class="font-semibold">@Label</label>

    <button class="toggle-option" active=@(_isActive.ToString().ToLower()) @onclick=ToggleButtonAsync></button>
</div>

@code {
    [Parameter]
    public LocalStorageService? LocalStorageService { get; set; }

    [Parameter]
    public string? Label { get; set; }

    [Parameter]
    public StorageKeys StorageKey { get; set; }

    private bool _isActive = false;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        if (LocalStorageService is null)
            return;

        string? localStorageIsActive = await LocalStorageService.GetKeyAsync<string>(StorageKey);

        _isActive = localStorageIsActive == "true";
    }

    private async Task ToggleButtonAsync()
    {
        _isActive = !_isActive;

        if (LocalStorageService is null)
            return;

        await LocalStorageService.SetKeyAsync<string>(StorageKey, _isActive.ToString().ToLower());
    }
}
